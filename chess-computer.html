<!DOCTYPE html>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anton&display=swap" rel="stylesheet">
<script src="toggle.js"></script>
<link href="newgame.css" rel="stylesheet">
<link href="gameover.css" rel="stylesheet">
<link href="main.css" rel="stylesheet">

<body>


<div class="container">
    <p class="diff" id="difficultyText" style="display: none;">Difficulty: 8</p>
    <input class="diff" id="stockfishDifficulty" type="range" min="1" max="15" style="display: none;">
    <p class="diff" id="boardstate" style="display: none;"></p>
</div>


<div id="outer-container">

    <div class="side-menu option-box">
        <div id="online-settings-container">
            <p>Game ID:</p>
            <input class="copyable-text-field" id="game-id-read" type="text" readonly>
            <p>Challenge Link:</p>
            <input class="copyable-text-field" id="challenge-link-read" readonly>
            <button id="cpy-button" class="menu-button-1">Click to copy</button>
        </div>
        
        <div id="additional-settings-container" style="height: 100%;">
            <u style="display: block; margin-top: 20%; margin-bottom: 10%;">Additional Settings</u>
            <div class="colors-settings">
                <p>Color 1:</p>
                <input id="color1" type="color" class="color-setting">
                <p>Color 2:</p>
                <input id="color2" type="color" class="color-setting">
                <p>Highlight Color:</p>
                <input id="color3" type="color" class="color-setting">
                <button id="reset-colors" class="menu-button-1">Reset Colors</button>
            </div>
                

        </div>

        <button id="settings" class="buttons" style="margin-top: auto; margin-bottom: 20%;">Additional Settings...</button>
    </div>

    <script>
        document.getElementById("cpy-button").addEventListener("click",(event) => {
            navigator.clipboard.writeText(document.getElementById("challenge-link-read").value);
            event.target.innerText="Copied!";
            new Promise(r=>setTimeout(r,1000)).then(()=>{
                document.getElementById("cpy-button").innerText="Click to copy";
            })
        })

        let color1=document.getElementById("color1");
        let color2=document.getElementById("color2");
        let color3=document.getElementById("color3");

        let defColor1="#769656"
        let defColor2="#EEEED2"
        let defColor3="#B6E4F0"
        
        color1.value = defColor1;
        color2.value = defColor2;
        color3.value= defColor3;


        let onlineSettings=document.getElementById("online-settings-container");
        let additionalSettings=document.getElementById("additional-settings-container");

        document.getElementById("reset-colors").addEventListener("click",e=> {
            color1.value=defColor1;
            color2.value=defColor2;
            color3.value=defColor3;
        })

        document.getElementById("settings").addEventListener("click",e=>{
            if (e.target.innerText=="Online Info...") {
                e.target.innerText="Additional Settings...";
                onlineSettings.style.display="block";
                additionalSettings.style.display="none";
            }

            else {
                e.target.innerText="Online Info...";
                onlineSettings.style.display="none";
                additionalSettings.style.display="block";
            }
        })
    </script>

    <div id="game-container">
        <canvas id="main" width="900" height="900" style="border: 1px solid; "></canvas>  
        <div id="usernames">
            <p id="p1-name" class="username-box">Player 1</p>
            <p id="p2-name" class="username-box" style="margin-top: auto;">StockFish Engine</p>
        </div>
        
    </div>

    <div class="side-menu option-box">
        <p>Moves:</p>
        <p id="moves-list"></p>
        <button id="resign" class="menu-button-1" style="font-size: 3vw;">Resign</button>
    </div>
</div>



<script type="module">
    import * as Chess from "./chess.js";
    await Chess.setupBotMatch();
</script>
<p class="diff" id="cpos" style="display: none;">Cursor Pos:</p>
<p class="diff" id="checkInfo" style="display: none;">checkInfo</p>











<script>
    var elem=document.getElementById("stockfishDifficulty");
    elem.oninput=function() {
        document.getElementById("difficultyText").innerHTML="Difficulty: "+this.value
    }
</script>

</body>